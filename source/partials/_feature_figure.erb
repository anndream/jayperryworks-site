<%#
  Feature figure component
  - A large image with caption

  Locals:
  STRING source: the path to the image
  STRING alt: alt for the image
  &BLOCK: your caption text/markup
%>

<%
  alt ||= ''
  upload ||= 'true'
  outcrop ||= 'true'
  margins ||= [ 'top', 'bottom' ]
  border ||= false
  classes ||= ''

  # make a list of border classes from the borders array
  margin_list = ''

  if margins != 'none'
    margins.each do |side|
      margin_list << " margin-#{side}-wide"
    end
  end

  src = (upload == 'true' ? "uploads/#{source}" : source)

  utils = [
    margin_list,
    't-center',
    ('padding-x-outside' if outcrop == 'true'),
    classes
  ]
%>

<figure<%= ' data-ui-wrapper-outcrop' if outcrop == 'true' %><%= class_list(utils) %>>
  <%= image_tag src, alt: alt, class: border ? 'border' : '' %>
  <figcaption class="display-inline_block t-caption margin-top-narrow">
    <%= yield %>
  </figcaption>
</figure>
